[Back to Overview](../README.md)

# 01. Convert Notebooks to *.py and *.md

> This tool allows conversion from an ipynb notebook into .py or .md files.

<!-- hide -->

First we will implement a helper function that allows us to find all notebooks. For that we will scan the folder provided.

<!-- hide -->

For scanning the folder, we want to cleanly combine the paths.

<!-- hide -->

Notebooks can be identified by their filenames ending on `.ipynb`.

<!-- hide -->

A quick test on the source folder.

<!-- hide -->

Now that this works. Let's load the first notebook.

<!-- hide -->

## Extracting code from the notebook

With the notebook loaded it is time to extract info:

1. Check if notebook is flaged as convertible
2. Get the Export Cells
3. Combine all the cells into python code

<!-- hide -->

## Writing the code

Now the next step is to write the python file. For this we need to know the project root, the notebook and the filepath where the notebook was saved.
With that info we can create the python code and save it in the correct location relative to the project root.

## Convert all Notebooks in a Folder to Python

One core feature of this library is to convert all notebook files located beneath the `nb_root` folder into python files relative to the `project_root`.
For this conversion the notebook is scanned for:

1. A code cell which contians `#default_exp python_package.for.this.notebook`
2. All code cells where the first line is `#export`

Then using the cells marked with `#export` a python file in `python_package/for/this/notebook.py` is created.
The generated python file should not be modified and the cell and AUTOGENERATED comments must not be deleted.

---
## *def* **notebook2py**

Convert all notebooks in the folder.

* **project_root** *(str, optional)*: The root directory of the project. The default exp path is relative to this folder.


Example:
```python
notebook2py()
```
Output:
```
Converting to py: jlabdev/convert.ipynb

```

<!-- hide -->

# Markdown Conversion

This is actually more complicated. For this we will need to find all markdown cells and extract the doc from all #export cells and convert all non export cells to markdown.

## Convert all Notebooks in a Folder to Markdown

One core feature of this library is to convert all notebook files located beneath the `nb_root` folder into python files relative to the `project_root`.
For this conversion the notebook is scanned for:

1. A code cell which contians `#default_exp python_package.for.this.notebook` is searched to find the output file name.
2. All cells are scanned and based on their type an action is taken:
    * `#hide` -> Cell is ignored.
    * markdown -> The cell is 1 to 1 copied into the doc.
    * `#export` code cell -> The cell is scanned for any public function and class. They are added with their docstring to the markdown.
    * other code cell -> The cell is treated as an example and the code and the output are inserted into the markdown.


---
## *def* **notebook2doc**

Convert all notebooks in the folder.

Also converts notebooks annotated with #example in first cell.
All notebooks, which have a title starting with "Example: " are listed under examples without the "Example: " shown in the list.

* **project_root** *(str, optional)*: The root directory of the project. The default exp path is relative to this folder.


Example:
```python
notebook2doc()
```
Output:
```
Converting to md: jlabdev/convert.ipynb
Converting to md: setup.py
Converting to md: jlabdev/__init__.py

```

---
## *def* **python2nb**

Convert all notebooks in the folder.

* **project_root** *(str, optional)*: The root directory of the project. The default exp path is relative to this folder.


---
## *def* **notebook2all**

Run the notebook2py and notebook2doc commands.

* **project_root** *(str, optional)*: The path to the project root, defaults to ".".


